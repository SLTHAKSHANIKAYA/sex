<!DOCTYPE html>
<html>
<head>
    <title>Video Hub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">

    <style>
        .ad-wrapper{
            text-align:center;
            margin:25px auto;
            padding:10px;
            display:flex;
            justify-content:center;
        }

        /* ===== STICKY MIDDLE AD ===== */
        .sticky-ad{
            position:fixed;
            bottom:20px;
            left:50%;
            transform:translateX(-50%);
            background:#000;
            padding:10px;
            z-index:9999;
            border-radius:8px;
            box-shadow:0 0 15px rgba(0,0,0,.7);
        }

        .sticky-ad button{
            position:absolute;
            top:-10px;
            right:-10px;
            background:red;
            color:#fff;
            border:none;
            border-radius:50%;
            width:25px;
            height:25px;
            cursor:pointer;
            font-weight:bold;
        }

        @media(max-width:600px){
            .sticky-ad{
                width:90%;
            }
        }
    </style>
</head>

<body>

<header>
    <div class="logo">Video Hub</div>
    <a href="admin.html" class="nav-btn">ðŸ”’ Admin</a>
</header>

<!-- ================= TOP AD ================= -->
<div class="ad-wrapper">
<script async data-cfasync="false"
src="https://pl28499138.effectivegatecpm.com/ab156ca71ac330f95a6cd68d1ae74514/invoke.js"></script>
<div id="container-ab156ca71ac330f95a6cd68d1ae74514"></div>
</div>
<!-- ========================================= -->

<div class="container">
    <div class="grid" id="videoGrid">
        <p style="text-align:center;color:#555;width:100%;">Loading Videos...</p>
    </div>
</div>

<!-- ================= BOTTOM AD ================= -->
<div class="ad-wrapper">
<script async data-cfasync="false"
src="https://pl28499138.effectivegatecpm.com/ab156ca71ac330f95a6cd68d1ae74514/invoke.js"></script>
<div id="container-ab156ca71ac330f95a6cd68d1ae74514"></div>
</div>
<!-- ============================================ -->

<!-- ========== STICKY MIDDLE AD (Closable) ========== -->
<div class="sticky-ad" id="stickyAd">
    <button onclick="closeSticky()">âœ•</button>

<script>
  atOptions = {
    'key' : '9419cc143f44d80cac2f52f79ceda29d',
    'format' : 'iframe',
    'height' : 250,
    'width' : 300,
    'params' : {}
  };
</script>
<script src="https://www.highperformanceformat.com/9419cc143f44d80cac2f52f79ceda29d/invoke.js"></script>

</div>
<!-- ================================================ -->

<!-- POPUNDER (unchanged) -->
<script src="https://pl28499562.effectivegatecpm.com/7b/83/ec/7b83ec01fdc23f6d448e5d2ab9400560.js"></script>

<script>
function closeSticky(){
    document.getElementById("stickyAd").style.display="none";
}

/* ===== VIDEO LOADER ===== */
const sheetURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vTDHMCsnKxbAdBApU5e1Jqw65HhPP_ti_TczWjyhMC-emufORz2D6MvWNrVk77KqF7so5OPhIR8YGkz/pub?output=csv";

async function loadVideos(){
    const grid=document.getElementById("videoGrid");
    try{
        const res=await fetch(sheetURL);
        const text=await res.text();
        const rows=text.split("\n").slice(1);
        grid.innerHTML="";

        rows.reverse().forEach(r=>{
            const m=r.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);
            if(!m||m.length<4)return;

            const title=m[1]?.replace(/^"|"$/g,'');
            const cat=m[2]?.replace(/^"|"$/g,'');
            const url=m[3]?.replace(/^"|"$/g,'').trim();

            if(url && url.startsWith("http")){
                const card=`
                <div class="video-card">
                  <a href="watch.html?v=${encodeURIComponent(url)}&t=${encodeURIComponent(title)}"
                     style="text-decoration:none;color:white;">
                    <div class="video-player" style="background:#000;position:relative">
                      <video src="${url}#t=1" preload="metadata"></video>
                      <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
                      font-size:40px;">â–¶</div>
                    </div>
                    <div class="info">
                      <span class="cat">${cat}</span>
                      <div class="title">${title}</div>
                    </div>
                  </a>
                </div>`;
                grid.innerHTML+=card;
            }
        });
    }catch(e){
        grid.innerHTML="<p>Error loading videos</p>";
    }
}
loadVideos();
</script>

</body>
</html>
