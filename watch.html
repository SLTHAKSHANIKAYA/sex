<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Watch Video</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta property="og:title" content="Watch Video">
<meta property="og:description" content="Watch this video now">
<meta property="og:type" content="video.other">
<meta property="og:site_name" content="DarkStream">

<style>
body{
  margin:0;
  background:#0d0d0d;
  color:#fff;
  font-family:sans-serif;
}

header{
  padding:12px;
  border-bottom:1px solid #222;
  display:flex;
  justify-content:space-between;
}

.container{
  max-width:1200px;
  margin:auto;
  padding:15px;
}

.video-wrap{
  max-width:900px;
  margin:auto;
  background:#000;
  border-radius:10px;
  overflow:hidden;
  border:1px solid #333;
}

video{
  width:100%;
  aspect-ratio:16/9;
  background:#000;
}

h1{
  text-align:center;
  margin:15px 0;
  font-size:22px;
}

.actions{
  display:flex;
  gap:10px;
  max-width:900px;
  margin:10px auto;
}

.actions a,
.actions button{
  flex:1;
  padding:12px;
  text-align:center;
  font-size:16px;
  border:none;
  border-radius:6px;
  color:#fff;
}

.actions a{background:#cc0000;text-decoration:none;}
.actions button{background:#0088cc;}

.adbox{
  text-align:center;
  margin:20px auto;
  max-width:320px;
}

/* SIDE ADS ‚Äì DESKTOP ONLY */
.side-ads{
  display:flex;
  justify-content:center;
  gap:20px;
}

.side-ad{
  width:160px;
}

@media(max-width:900px){
  .side-ad{display:none;}
}
</style>
</head>

<body>

<header>
  <a href="index.html" style="color:#ff0000;font-size:20px;text-decoration:none;">DarkStream</a>
  <a href="index.html" style="color:#fff;text-decoration:none;">üè† Home</a>
</header>

<div class="container">

<!-- VIDEO -->
<div class="video-wrap">
  <video id="player" controls playsinline preload="metadata"></video>
</div>

<h1 id="title">Loading...</h1>

<div class="actions">
  <a href="#" id="downloadBtn">‚¨á Download</a>
  <button onclick="share()">üîó Share</button>
</div>

<!-- BELOW VIDEO AD (SAFE ‚Äì LOAD LATE) -->
<div class="adbox" id="belowAd"></div>

<!-- SIDE ADS (DESKTOP ONLY) -->
<div class="side-ads">
  <div class="side-ad" id="leftAd"></div>
  <div class="side-ad" id="rightAd"></div>
</div>

</div>

<script>
function getParam(p){
  return new URLSearchParams(location.search).get(p);
}

function isMobile(){
  return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
}

let realDownload = "";

window.onload = function(){

  const v = getParam("v");
  const t = getParam("t");

  if(!v || !v.startsWith("https://")){
    document.body.innerHTML="<h2 style='text-align:center;margin-top:50px;'>Video Not Found</h2>";
    return;
  }

  player.src = v;
  realDownload = v;

  if(t){
    title.innerText = decodeURIComponent(t);
    document.title = decodeURIComponent(t);
  }

  /* LOAD ADS ONLY AFTER VIDEO START */
  player.addEventListener("play",function(){

    // BELOW VIDEO AD
    if(!belowAd.innerHTML){
      belowAd.innerHTML = `
<script>
atOptions = {
  'key' : '9419cc143f44d80cac2f52f79ceda29d',
  'format' : 'iframe',
  'height' : 250,
  'width' : 300
};
<\/script>
<script src="https://www.highperformanceformat.com/9419cc143f44d80cac2f52f79ceda29d/invoke.js"><\/script>
`;
    }

    // SIDE ADS (DESKTOP ONLY)
    if(window.innerWidth > 900 && !leftAd.innerHTML){
      leftAd.innerHTML = rightAd.innerHTML = `
<script async data-cfasync="false"
src="https://pl28509871.effectivegatecpm.com/89927707a9add77c81162243cfa9c89b/invoke.js"><\/script>
<div id="container-89927707a9add77c81162243cfa9c89b"><\/div>
`;
    }

  });

  /* DOWNLOAD INTERSTITIAL */
  downloadBtn.onclick = function(e){
    e.preventDefault();

    // show interstitial
    const w = window.open("", "_blank");
    w.document.write(`
      <html><head><title>Please wait...</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <style>
        body{background:#000;color:#fff;
        display:flex;align-items:center;justify-content:center;
        height:100vh;font-family:sans-serif;}
      </style>
      </head>
      <body>
        <div>
          <h2>Preparing download...</h2>
          <p>Please wait 3 seconds</p>

          <!-- INTERSTITIAL AD -->
          <script async data-cfasync="false"
          src="https://pl28509871.effectivegatecpm.com/89927707a9add77c81162243cfa9c89b/invoke.js"><\/script>
          <div id="container-89927707a9add77c81162243cfa9c89b"><\/div>

          <script>
            setTimeout(function(){
              location.href="${realDownload}";
            },3000);
          <\/script>
        </div>
      </body></html>
    `);
  };
};

function share(){
  if(navigator.share){
    navigator.share({title::document.title,url:location.href});
  }else{
    navigator.clipboard.writeText(location.href);
    alert("Link copied");
  }
}
</script>

</body>
</html>
